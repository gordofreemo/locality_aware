Testing Size 1
PMPI_Alltoall Time 4.509843e-04
GPU-Aware Pairwise Exchange Time 1.834885e-03
GPU-Aware Nonblocking Time 8.022737e-04
Copy-to-CPU Pairwise Exchange Time 1.545473e-03
Copy-to-CPU Nonblocking Time 1.337416e-03
Testing Size 2
PMPI_Alltoall Time 4.012186e-04
GPU-Aware Pairwise Exchange Time 1.571499e-03
GPU-Aware Nonblocking Time 8.373578e-04
Copy-to-CPU Pairwise Exchange Time 1.465839e-03
Copy-to-CPU Nonblocking Time 1.270767e-03
Testing Size 4
PMPI_Alltoall Time 5.589646e-04
GPU-Aware Pairwise Exchange Time 1.830892e-03
GPU-Aware Nonblocking Time 8.780511e-04
Copy-to-CPU Pairwise Exchange Time 1.356065e-03
Copy-to-CPU Nonblocking Time 1.206471e-03
Testing Size 8
PMPI_Alltoall Time 4.686077e-04
GPU-Aware Pairwise Exchange Time 1.815229e-03
GPU-Aware Nonblocking Time 7.631778e-04
Copy-to-CPU Pairwise Exchange Time 1.219662e-03
Copy-to-CPU Nonblocking Time 1.302603e-03
Testing Size 16
PMPI_Alltoall Time 4.049980e-04
GPU-Aware Pairwise Exchange Time 1.609220e-03
GPU-Aware Nonblocking Time 8.752318e-04
Copy-to-CPU Pairwise Exchange Time 1.284920e-03
Copy-to-CPU Nonblocking Time 1.190755e-03
Testing Size 32
PMPI_Alltoall Time 4.749285e-04
GPU-Aware Pairwise Exchange Time 1.824237e-03
GPU-Aware Nonblocking Time 8.207067e-04
Copy-to-CPU Pairwise Exchange Time 1.435529e-03
Copy-to-CPU Nonblocking Time 1.255777e-03
Testing Size 64
PMPI_Alltoall Time 4.106342e-04
GPU-Aware Pairwise Exchange Time 1.706957e-03
GPU-Aware Nonblocking Time 7.627427e-04
Copy-to-CPU Pairwise Exchange Time 1.244207e-03
Copy-to-CPU Nonblocking Time 1.385087e-03
Testing Size 128
PMPI_Alltoall Time 4.156380e-04
GPU-Aware Pairwise Exchange Time 1.659205e-03
GPU-Aware Nonblocking Time 9.255526e-04
Copy-to-CPU Pairwise Exchange Time 1.298759e-03
Copy-to-CPU Nonblocking Time 1.203009e-03
Testing Size 256
PMPI_Alltoall Time 8.878029e-05
GPU-Aware Pairwise Exchange Time 1.734345e-03
GPU-Aware Nonblocking Time 7.632350e-04
Copy-to-CPU Pairwise Exchange Time 1.681491e-03
Copy-to-CPU Nonblocking Time 1.212672e-03
Testing Size 512
PMPI_Alltoall Time 1.074306e-04
GPU-Aware Pairwise Exchange Time 1.593135e-03
GPU-Aware Nonblocking Time 7.675478e-04
Copy-to-CPU Pairwise Exchange Time 1.274588e-03
Copy-to-CPU Nonblocking Time 1.325862e-03
Testing Size 1024
PMPI_Alltoall Time 1.516955e-04
GPU-Aware Pairwise Exchange Time 1.606510e-03
GPU-Aware Nonblocking Time 9.090005e-04
Copy-to-CPU Pairwise Exchange Time 1.420665e-03
Copy-to-CPU Nonblocking Time 1.229312e-03
Testing Size 2048
PMPI_Alltoall Time 2.224067e-04
GPU-Aware Pairwise Exchange Time 1.696388e-03
GPU-Aware Nonblocking Time 8.376375e-04
Copy-to-CPU Pairwise Exchange Time 1.424403e-03
Copy-to-CPU Nonblocking Time 1.270400e-03
Testing Size 4096
PMPI_Alltoall Time 3.470472e-04
GPU-Aware Pairwise Exchange Time 1.667245e-03
GPU-Aware Nonblocking Time 7.699631e-04
Copy-to-CPU Pairwise Exchange Time 1.515794e-03
Copy-to-CPU Nonblocking Time 1.321924e-03
Testing Size 8192
PMPI_Alltoall Time 6.967963e-04
GPU-Aware Pairwise Exchange Time 2.027869e-03
GPU-Aware Nonblocking Time 7.825881e-04
Copy-to-CPU Pairwise Exchange Time 2.026952e-03
Copy-to-CPU Nonblocking Time 1.617668e-03
Testing Size 16384
PMPI_Alltoall Time 9.001535e-04
GPU-Aware Pairwise Exchange Time 2.078659e-03
GPU-Aware Nonblocking Time 7.871275e-04
Copy-to-CPU Pairwise Exchange Time 6.242411e-03
Copy-to-CPU Nonblocking Time 4.367294e-03
Testing Size 32768
PMPI_Alltoall Time 1.745787e-03
GPU-Aware Pairwise Exchange Time 2.465635e-03
GPU-Aware Nonblocking Time 1.138593e-03
Copy-to-CPU Pairwise Exchange Time 8.674432e-03
Copy-to-CPU Nonblocking Time 6.202298e-03
Testing Size 65536
PMPI_Alltoall Time 3.388026e-03
GPU-Aware Pairwise Exchange Time 3.026831e-03
GPU-Aware Nonblocking Time 1.970633e-03
Copy-to-CPU Pairwise Exchange Time 1.263938e-02
Copy-to-CPU Nonblocking Time 9.855593e-03
Testing Size 131072
PMPI_Alltoall Time 6.239462e-03
GPU-Aware Pairwise Exchange Time 4.818473e-03
GPU-Aware Nonblocking Time 3.760998e-03
Copy-to-CPU Pairwise Exchange Time 2.204301e-02
Copy-to-CPU Nonblocking Time 1.848998e-02
Testing Size 262144
PMPI_Alltoall Time 1.302717e-02
GPU-Aware Pairwise Exchange Time 8.133077e-03
GPU-Aware Nonblocking Time 7.039261e-03
Copy-to-CPU Pairwise Exchange Time 4.073494e-02
Copy-to-CPU Nonblocking Time 3.643321e-02
Testing Size 524288
PMPI_Alltoall Time 2.615773e-02
GPU-Aware Pairwise Exchange Time 1.557242e-02
GPU-Aware Nonblocking Time 1.349680e-02
Copy-to-CPU Pairwise Exchange Time 8.030114e-02
Copy-to-CPU Nonblocking Time 7.428165e-02
app 0: ./gpu_alltoall 
rank: 0: { host: 1; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 1: { host: 1; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 2: { host: 1; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 3: { host: 1; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 4: { host: 2; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 5: { host: 2; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 6: { host: 2; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 7: { host: 2; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 8: { host: 3; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 9: { host: 3; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 10: { host: 3; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 11: { host: 3; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 12: { host: 4; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 13: { host: 4; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 14: { host: 4; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 15: { host: 4; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
Testing Size 1
PMPI_Alltoall Time 4.041739e-04
Threaded Pairwise Exchange Time 1.293037e-03
Threaded Nonblocking Time 1.249537e-03
Testing Size 2
PMPI_Alltoall Time 4.098097e-04
Threaded Pairwise Exchange Time 1.290741e-03
Threaded Nonblocking Time 1.297065e-03
Testing Size 4
PMPI_Alltoall Time 4.043309e-04
Threaded Pairwise Exchange Time 1.292896e-03
Threaded Nonblocking Time 1.295951e-03
Testing Size 8
PMPI_Alltoall Time 4.047930e-04
Threaded Pairwise Exchange Time 1.246429e-03
Threaded Nonblocking Time 1.261179e-03
Testing Size 16
PMPI_Alltoall Time 4.092326e-04
Threaded Pairwise Exchange Time 1.370504e-03
Threaded Nonblocking Time 1.237818e-03
Testing Size 32
PMPI_Alltoall Time 6.446486e-04
Threaded Pairwise Exchange Time 1.707271e-03
Threaded Nonblocking Time 1.267162e-03
Testing Size 64
PMPI_Alltoall Time 4.090593e-04
Threaded Pairwise Exchange Time 1.397179e-03
Threaded Nonblocking Time 1.263217e-03
Testing Size 128
PMPI_Alltoall Time 4.140718e-04
Threaded Pairwise Exchange Time 1.248052e-03
Threaded Nonblocking Time 1.272808e-03
Testing Size 256
PMPI_Alltoall Time 8.410815e-05
Threaded Pairwise Exchange Time 1.249243e-03
Threaded Nonblocking Time 1.229168e-03
Testing Size 512
PMPI_Alltoall Time 1.032945e-04
Threaded Pairwise Exchange Time 1.327563e-03
Threaded Nonblocking Time 1.316864e-03
Testing Size 1024
PMPI_Alltoall Time 1.474778e-04
Threaded Pairwise Exchange Time 1.487245e-03
Threaded Nonblocking Time 1.536053e-03
Testing Size 2048
PMPI_Alltoall Time 2.155242e-04
Threaded Pairwise Exchange Time 1.356074e-03
Threaded Nonblocking Time 1.509797e-03
Testing Size 4096
PMPI_Alltoall Time 3.319471e-04
Threaded Pairwise Exchange Time 1.508454e-03
Threaded Nonblocking Time 1.384628e-03
Testing Size 8192
PMPI_Alltoall Time 6.233746e-04
Threaded Pairwise Exchange Time 1.742167e-03
Threaded Nonblocking Time 1.586894e-03
Testing Size 16384
PMPI_Alltoall Time 8.983334e-04
Threaded Pairwise Exchange Time 4.480551e-03
Threaded Nonblocking Time 4.322226e-03
Testing Size 32768
PMPI_Alltoall Time 1.744299e-03
Threaded Pairwise Exchange Time 5.853663e-03
Threaded Nonblocking Time 5.861180e-03
Testing Size 65536
PMPI_Alltoall Time 3.464585e-03
Threaded Pairwise Exchange Time 9.153473e-03
Threaded Nonblocking Time 9.026311e-03
Testing Size 131072
PMPI_Alltoall Time 6.835708e-03
Threaded Pairwise Exchange Time 1.760906e-02
Threaded Nonblocking Time 1.730735e-02
Testing Size 262144
PMPI_Alltoall Time 1.554637e-02
Threaded Pairwise Exchange Time 2.993890e-02
Threaded Nonblocking Time 3.037532e-02
Testing Size 524288
PMPI_Alltoall Time 2.697846e-02
Threaded Pairwise Exchange Time 6.061746e-02
Threaded Nonblocking Time 6.192125e-02
app 0: ./gpu_threaded_alltoall 
rank: 0: { host: 1; cpu: {0-39}, {40-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 1: { host: 1; cpu: {40-79}, {0-39,80-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 2: { host: 1; cpu: {80-119}, {0-79,120-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 3: { host: 1; cpu: {120-159}, {0-119} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 4: { host: 2; cpu: {0-39}, {40-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 5: { host: 2; cpu: {40-79}, {0-39,80-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 6: { host: 2; cpu: {80-119}, {0-79,120-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 7: { host: 2; cpu: {120-159}, {0-119} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 8: { host: 3; cpu: {0-39}, {40-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 9: { host: 3; cpu: {40-79}, {0-39,80-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 10: { host: 3; cpu: {80-119}, {0-79,120-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 11: { host: 3; cpu: {120-159}, {0-119} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 12: { host: 4; cpu: {0-39}, {40-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 13: { host: 4; cpu: {40-79}, {0-39,80-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 14: { host: 4; cpu: {80-119}, {0-79,120-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 15: { host: 4; cpu: {120-159}, {0-119} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0

------------------------------------------------------------
Sender: LSF System <lsfadmin@lassen710>
Subject: Job 4926595: <gpu_alltoall4> in cluster <lassen> Done

Job <gpu_alltoall4> was submitted from host <lassen708> by user <bienz1> in cluster <lassen> at Thu Jun 22 13:53:00 2023
Job was executed on host(s) <1*lassen710>, in queue <pbatch>, as user <bienz1> in cluster <lassen> at Thu Jun 22 13:53:03 2023
                            <40*lassen259>
                            <40*lassen593>
                            <40*lassen107>
                            <40*lassen769>
</g/g14/bienz1> was used as the home directory.
</g/g14/bienz1/locality_aware_gpu/benchmark_tests/lassen> was used as the working directory.
Started at Thu Jun 22 13:53:03 2023
Terminated at Thu Jun 22 13:54:59 2023
Results reported at Thu Jun 22 13:54:59 2023

Your job looked like:

------------------------------------------------------------
# LSBATCH: User input
#!/bin/bash
#BSUB -J gpu_alltoall4
#BSUB -e gpu_alltoall4.%J.err
#BSUB -o gpu_alltoall4.%J.out
#BSUB -nnodes 4
#BSUB -q pbatch
#BSUB -W 00:15

cd /g/g14/bienz1/locality_aware_gpu/build_gpu_lassen/benchmarks

jsrun -a4 -c4 -g4 -r1 -n4 -M "-gpu" --latency_priority=gpu-cpu --launch_distribution=packed --print_placement=1 ./gpu_alltoall

export MV2_USE_ALIGNED_ALLOC=1
export OMP_NUM_THREADS=10
jsrun -n4 -r1 -a4 -c40 -g4 -bpacked:10 -dpacked -EOMP_NUM_THREADS=10 -M "-gpu" --latency_priority=gpu-cpu --launch_distribution=packed --print_placement=1 ./gpu_threaded_alltoall

------------------------------------------------------------

Successfully completed.

Resource usage summary:

    CPU time :                                   0.23 sec.
    Max Memory :                                 59 MB
    Average Memory :                             55.79 MB
    Total Requested Memory :                     -
    Delta Memory :                               -
    Max Swap :                                   1425 MB
    Max Processes :                              4
    Max Threads :                                27
    Run time :                                   114 sec.
    Turnaround time :                            119 sec.

The output (if any) is above this job summary.



PS:

Read file <gpu_alltoall4.4926595.err> for stderr output of this job.

