Testing Size 1
PMPI_Alltoall Time 1.038484e-03
GPU-Aware Pairwise Exchange Time 1.545423e-03
GPU-Aware Nonblocking Time 7.491568e-04
Copy-to-CPU Pairwise Exchange Time 1.213589e-03
Copy-to-CPU Nonblocking Time 1.147159e-03
Testing Size 2
PMPI_Alltoall Time 3.786010e-04
GPU-Aware Pairwise Exchange Time 1.432114e-03
GPU-Aware Nonblocking Time 7.211758e-04
Copy-to-CPU Pairwise Exchange Time 1.162926e-03
Copy-to-CPU Nonblocking Time 1.184436e-03
Testing Size 4
PMPI_Alltoall Time 5.582928e-04
GPU-Aware Pairwise Exchange Time 1.486992e-03
GPU-Aware Nonblocking Time 7.162558e-04
Copy-to-CPU Pairwise Exchange Time 1.310137e-03
Copy-to-CPU Nonblocking Time 1.162576e-03
Testing Size 8
PMPI_Alltoall Time 3.727659e-04
GPU-Aware Pairwise Exchange Time 1.427891e-03
GPU-Aware Nonblocking Time 7.164487e-04
Copy-to-CPU Pairwise Exchange Time 1.190672e-03
Copy-to-CPU Nonblocking Time 1.490405e-03
Testing Size 16
PMPI_Alltoall Time 3.792178e-04
GPU-Aware Pairwise Exchange Time 1.488217e-03
GPU-Aware Nonblocking Time 7.171074e-04
Copy-to-CPU Pairwise Exchange Time 1.177338e-03
Copy-to-CPU Nonblocking Time 1.144286e-03
Testing Size 32
PMPI_Alltoall Time 3.765458e-04
GPU-Aware Pairwise Exchange Time 1.420292e-03
GPU-Aware Nonblocking Time 7.167520e-04
Copy-to-CPU Pairwise Exchange Time 1.189147e-03
Copy-to-CPU Nonblocking Time 1.163426e-03
Testing Size 64
PMPI_Alltoall Time 5.042095e-04
GPU-Aware Pairwise Exchange Time 1.484680e-03
GPU-Aware Nonblocking Time 7.169074e-04
Copy-to-CPU Pairwise Exchange Time 1.249220e-03
Copy-to-CPU Nonblocking Time 1.235800e-03
Testing Size 128
PMPI_Alltoall Time 3.843268e-04
GPU-Aware Pairwise Exchange Time 1.420242e-03
GPU-Aware Nonblocking Time 7.163656e-04
Copy-to-CPU Pairwise Exchange Time 1.192136e-03
Copy-to-CPU Nonblocking Time 1.149593e-03
Testing Size 256
PMPI_Alltoall Time 3.912222e-04
GPU-Aware Pairwise Exchange Time 1.424220e-03
GPU-Aware Nonblocking Time 7.157298e-04
Copy-to-CPU Pairwise Exchange Time 1.512694e-03
Copy-to-CPU Nonblocking Time 1.182526e-03
Testing Size 512
PMPI_Alltoall Time 8.688608e-05
GPU-Aware Pairwise Exchange Time 1.490956e-03
GPU-Aware Nonblocking Time 7.175860e-04
Copy-to-CPU Pairwise Exchange Time 1.228081e-03
Copy-to-CPU Nonblocking Time 1.193969e-03
Testing Size 1024
PMPI_Alltoall Time 1.069891e-04
GPU-Aware Pairwise Exchange Time 1.427472e-03
GPU-Aware Nonblocking Time 7.178235e-04
Copy-to-CPU Pairwise Exchange Time 1.224048e-03
Copy-to-CPU Nonblocking Time 1.199584e-03
Testing Size 2048
PMPI_Alltoall Time 1.374410e-04
GPU-Aware Pairwise Exchange Time 1.417095e-03
GPU-Aware Nonblocking Time 7.197563e-04
Copy-to-CPU Pairwise Exchange Time 1.283715e-03
Copy-to-CPU Nonblocking Time 1.217876e-03
Testing Size 4096
PMPI_Alltoall Time 3.982009e-04
GPU-Aware Pairwise Exchange Time 1.552731e-03
GPU-Aware Nonblocking Time 7.201984e-04
Copy-to-CPU Pairwise Exchange Time 1.320211e-03
Copy-to-CPU Nonblocking Time 1.234895e-03
Testing Size 8192
PMPI_Alltoall Time 3.271623e-04
GPU-Aware Pairwise Exchange Time 1.426897e-03
GPU-Aware Nonblocking Time 7.268482e-04
Copy-to-CPU Pairwise Exchange Time 1.415374e-03
Copy-to-CPU Nonblocking Time 1.286761e-03
Testing Size 16384
PMPI_Alltoall Time 4.791951e-04
GPU-Aware Pairwise Exchange Time 1.460788e-03
GPU-Aware Nonblocking Time 7.351711e-04
Copy-to-CPU Pairwise Exchange Time 2.831959e-03
Copy-to-CPU Nonblocking Time 2.207972e-03
Testing Size 32768
PMPI_Alltoall Time 9.111476e-04
GPU-Aware Pairwise Exchange Time 1.801871e-03
GPU-Aware Nonblocking Time 7.401476e-04
Copy-to-CPU Pairwise Exchange Time 4.350007e-03
Copy-to-CPU Nonblocking Time 3.522820e-03
Testing Size 65536
PMPI_Alltoall Time 1.738946e-03
GPU-Aware Pairwise Exchange Time 1.637340e-03
GPU-Aware Nonblocking Time 7.951646e-04
Copy-to-CPU Pairwise Exchange Time 6.014824e-03
Copy-to-CPU Nonblocking Time 5.014888e-03
Testing Size 131072
PMPI_Alltoall Time 2.998447e-03
GPU-Aware Pairwise Exchange Time 2.208867e-03
GPU-Aware Nonblocking Time 1.354105e-03
Copy-to-CPU Pairwise Exchange Time 9.713829e-03
Copy-to-CPU Nonblocking Time 8.138199e-03
Testing Size 262144
PMPI_Alltoall Time 5.916199e-03
GPU-Aware Pairwise Exchange Time 3.563314e-03
GPU-Aware Nonblocking Time 2.604769e-03
Copy-to-CPU Pairwise Exchange Time 1.810991e-02
Copy-to-CPU Nonblocking Time 1.659423e-02
Testing Size 524288
PMPI_Alltoall Time 1.120510e-02
GPU-Aware Pairwise Exchange Time 6.758273e-03
GPU-Aware Nonblocking Time 4.895974e-03
Copy-to-CPU Pairwise Exchange Time 3.659651e-02
Copy-to-CPU Nonblocking Time 3.350976e-02
app 0: ./gpu_alltoall 
rank: 0: { host: 1; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 1: { host: 1; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 2: { host: 1; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 3: { host: 1; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 4: { host: 2; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 5: { host: 2; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 6: { host: 2; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 7: { host: 2; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
Testing Size 1
PMPI_Alltoall Time 3.617486e-04
Threaded Pairwise Exchange Time 1.212991e-03
Threaded Nonblocking Time 2.014400e-03
Testing Size 2
PMPI_Alltoall Time 3.710278e-04
Threaded Pairwise Exchange Time 1.233812e-03
Threaded Nonblocking Time 1.206294e-03
Testing Size 4
PMPI_Alltoall Time 3.676762e-04
Threaded Pairwise Exchange Time 1.218377e-03
Threaded Nonblocking Time 1.220608e-03
Testing Size 8
PMPI_Alltoall Time 3.800422e-04
Threaded Pairwise Exchange Time 1.248144e-03
Threaded Nonblocking Time 1.227624e-03
Testing Size 16
PMPI_Alltoall Time 3.735212e-04
Threaded Pairwise Exchange Time 1.209929e-03
Threaded Nonblocking Time 1.400128e-03
Testing Size 32
PMPI_Alltoall Time 4.286921e-04
Threaded Pairwise Exchange Time 1.261513e-03
Threaded Nonblocking Time 1.372358e-03
Testing Size 64
PMPI_Alltoall Time 3.804464e-04
Threaded Pairwise Exchange Time 1.228459e-03
Threaded Nonblocking Time 1.207877e-03
Testing Size 128
PMPI_Alltoall Time 3.811374e-04
Threaded Pairwise Exchange Time 1.193663e-03
Threaded Nonblocking Time 1.273926e-03
Testing Size 256
PMPI_Alltoall Time 4.522813e-04
Threaded Pairwise Exchange Time 1.400986e-03
Threaded Nonblocking Time 1.206819e-03
Testing Size 512
PMPI_Alltoall Time 8.330618e-05
Threaded Pairwise Exchange Time 1.216170e-03
Threaded Nonblocking Time 1.221576e-03
Testing Size 1024
PMPI_Alltoall Time 1.097960e-04
Threaded Pairwise Exchange Time 1.225315e-03
Threaded Nonblocking Time 1.209738e-03
Testing Size 2048
PMPI_Alltoall Time 1.364943e-04
Threaded Pairwise Exchange Time 1.293302e-03
Threaded Nonblocking Time 1.234695e-03
Testing Size 4096
PMPI_Alltoall Time 1.906903e-04
Threaded Pairwise Exchange Time 1.255053e-03
Threaded Nonblocking Time 1.317818e-03
Testing Size 8192
PMPI_Alltoall Time 3.082143e-04
Threaded Pairwise Exchange Time 1.331065e-03
Threaded Nonblocking Time 1.416267e-03
Testing Size 16384
PMPI_Alltoall Time 5.080790e-04
Threaded Pairwise Exchange Time 2.761283e-03
Threaded Nonblocking Time 2.135486e-03
Testing Size 32768
PMPI_Alltoall Time 9.290278e-04
Threaded Pairwise Exchange Time 3.264973e-03
Threaded Nonblocking Time 3.186875e-03
Testing Size 65536
PMPI_Alltoall Time 1.751134e-03
Threaded Pairwise Exchange Time 4.793200e-03
Threaded Nonblocking Time 6.370689e-03
Testing Size 131072
PMPI_Alltoall Time 4.063477e-03
Threaded Pairwise Exchange Time 7.894772e-03
Threaded Nonblocking Time 7.636202e-03
Testing Size 262144
PMPI_Alltoall Time 6.489260e-03
Threaded Pairwise Exchange Time 1.507473e-02
Threaded Nonblocking Time 1.436328e-02
Testing Size 524288
PMPI_Alltoall Time 1.230887e-02
Threaded Pairwise Exchange Time 2.856352e-02
Threaded Nonblocking Time 2.794042e-02
app 0: ./gpu_threaded_alltoall 
rank: 0: { host: 1; cpu: {0-39}, {40-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 1: { host: 1; cpu: {40-79}, {0-39,80-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 2: { host: 1; cpu: {80-119}, {0-79,120-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 3: { host: 1; cpu: {120-159}, {0-119} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 4: { host: 2; cpu: {0-39}, {40-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 5: { host: 2; cpu: {40-79}, {0-39,80-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 6: { host: 2; cpu: {80-119}, {0-79,120-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 7: { host: 2; cpu: {120-159}, {0-119} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0

------------------------------------------------------------
Sender: LSF System <lsfadmin@lassen710>
Subject: Job 4926596: <gpu_alltoall2> in cluster <lassen> Done

Job <gpu_alltoall2> was submitted from host <lassen708> by user <bienz1> in cluster <lassen> at Thu Jun 22 13:53:35 2023
Job was executed on host(s) <1*lassen710>, in queue <pbatch>, as user <bienz1> in cluster <lassen> at Thu Jun 22 13:53:39 2023
                            <40*lassen757>
                            <40*lassen284>
</g/g14/bienz1> was used as the home directory.
</g/g14/bienz1/locality_aware_gpu/benchmark_tests/lassen> was used as the working directory.
Started at Thu Jun 22 13:53:39 2023
Terminated at Thu Jun 22 13:54:59 2023
Results reported at Thu Jun 22 13:54:59 2023

Your job looked like:

------------------------------------------------------------
# LSBATCH: User input
#!/bin/bash
#BSUB -J gpu_alltoall2
#BSUB -e gpu_alltoall2.%J.err
#BSUB -o gpu_alltoall2.%J.out
#BSUB -nnodes 2
#BSUB -q pbatch
#BSUB -W 00:15

cd /g/g14/bienz1/locality_aware_gpu/build_gpu_lassen/benchmarks

jsrun -n2 -r1 -a4 -c4 -g4 -M "-gpu" --latency_priority=gpu-cpu --launch_distribution=packed --print_placement=1 ./gpu_alltoall

export MV2_USE_ALIGNED_ALLOC=1
export OMP_NUM_THREADS=10
jsrun -n2 -r1 -a4 -c40 -g4 -bpacked:10 -dpacked -EOMP_NUM_THREADS=10 -M "-gpu" --latency_priority=gpu-cpu --launch_distribution=packed --print_placement=1 ./gpu_threaded_alltoall



------------------------------------------------------------

Successfully completed.

Resource usage summary:

    CPU time :                                   0.18 sec.
    Max Memory :                                 59 MB
    Average Memory :                             54.50 MB
    Total Requested Memory :                     -
    Delta Memory :                               -
    Max Swap :                                   1425 MB
    Max Processes :                              4
    Max Threads :                                27
    Run time :                                   79 sec.
    Turnaround time :                            84 sec.

The output (if any) is above this job summary.



PS:

Read file <gpu_alltoall2.4926596.err> for stderr output of this job.

