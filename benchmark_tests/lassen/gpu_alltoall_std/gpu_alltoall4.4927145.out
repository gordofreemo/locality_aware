Testing Size 1
PMPI_Alltoall Time 4.362259e-04
GPU-Aware Pairwise Exchange Time 2.590741e-03
GPU-Aware Nonblocking Time 1.880397e-03
Copy-to-CPU Pairwise Exchange Time 1.319597e-03
Copy-to-CPU Nonblocking Time 1.278706e-03
Testing Size 2
PMPI_Alltoall Time 3.908782e-04
GPU-Aware Pairwise Exchange Time 2.497426e-03
GPU-Aware Nonblocking Time 1.785849e-03
Copy-to-CPU Pairwise Exchange Time 1.728336e-03
Copy-to-CPU Nonblocking Time 1.228932e-03
Testing Size 4
PMPI_Alltoall Time 3.917856e-04
GPU-Aware Pairwise Exchange Time 2.568609e-03
GPU-Aware Nonblocking Time 1.952414e-03
Copy-to-CPU Pairwise Exchange Time 1.282258e-03
Copy-to-CPU Nonblocking Time 1.195840e-03
Testing Size 8
PMPI_Alltoall Time 4.611148e-04
GPU-Aware Pairwise Exchange Time 2.390184e-03
GPU-Aware Nonblocking Time 1.808695e-03
Copy-to-CPU Pairwise Exchange Time 1.300619e-03
Copy-to-CPU Nonblocking Time 1.193706e-03
Testing Size 16
PMPI_Alltoall Time 5.114048e-04
GPU-Aware Pairwise Exchange Time 2.370576e-03
GPU-Aware Nonblocking Time 2.184639e-03
Copy-to-CPU Pairwise Exchange Time 1.292641e-03
Copy-to-CPU Nonblocking Time 1.357736e-03
Testing Size 32
PMPI_Alltoall Time 4.608148e-04
GPU-Aware Pairwise Exchange Time 2.259308e-03
GPU-Aware Nonblocking Time 1.853225e-03
Copy-to-CPU Pairwise Exchange Time 1.262012e-03
Copy-to-CPU Nonblocking Time 1.331010e-03
Testing Size 64
PMPI_Alltoall Time 4.638457e-04
GPU-Aware Pairwise Exchange Time 2.335814e-03
GPU-Aware Nonblocking Time 2.171069e-03
Copy-to-CPU Pairwise Exchange Time 1.271951e-03
Copy-to-CPU Nonblocking Time 1.219958e-03
Testing Size 128
PMPI_Alltoall Time 4.031480e-04
GPU-Aware Pairwise Exchange Time 2.275786e-03
GPU-Aware Nonblocking Time 1.801484e-03
Copy-to-CPU Pairwise Exchange Time 1.296846e-03
Copy-to-CPU Nonblocking Time 1.260048e-03
Testing Size 256
PMPI_Alltoall Time 8.916359e-05
GPU-Aware Pairwise Exchange Time 2.474028e-03
GPU-Aware Nonblocking Time 1.871560e-03
Copy-to-CPU Pairwise Exchange Time 1.367387e-03
Copy-to-CPU Nonblocking Time 1.486432e-03
Testing Size 512
PMPI_Alltoall Time 1.099914e-04
GPU-Aware Pairwise Exchange Time 2.278125e-03
GPU-Aware Nonblocking Time 1.771610e-03
Copy-to-CPU Pairwise Exchange Time 1.296910e-03
Copy-to-CPU Nonblocking Time 1.247606e-03
Testing Size 1024
PMPI_Alltoall Time 1.541343e-04
GPU-Aware Pairwise Exchange Time 2.306238e-03
GPU-Aware Nonblocking Time 1.936919e-03
Copy-to-CPU Pairwise Exchange Time 1.399684e-03
Copy-to-CPU Nonblocking Time 1.282115e-03
Testing Size 2048
PMPI_Alltoall Time 3.697363e-04
GPU-Aware Pairwise Exchange Time 2.467644e-03
GPU-Aware Nonblocking Time 1.837355e-03
Copy-to-CPU Pairwise Exchange Time 1.712484e-03
Copy-to-CPU Nonblocking Time 1.391643e-03
Testing Size 4096
PMPI_Alltoall Time 3.732007e-04
GPU-Aware Pairwise Exchange Time 2.349951e-03
GPU-Aware Nonblocking Time 1.793928e-03
Copy-to-CPU Pairwise Exchange Time 1.533400e-03
Copy-to-CPU Nonblocking Time 1.326426e-03
Testing Size 8192
PMPI_Alltoall Time 6.920069e-04
GPU-Aware Pairwise Exchange Time 2.434149e-03
GPU-Aware Nonblocking Time 1.798824e-03
Copy-to-CPU Pairwise Exchange Time 1.976660e-03
Copy-to-CPU Nonblocking Time 1.561197e-03
Testing Size 16384
PMPI_Alltoall Time 9.857149e-04
GPU-Aware Pairwise Exchange Time 3.796245e-03
GPU-Aware Nonblocking Time 3.022860e-03
Copy-to-CPU Pairwise Exchange Time 6.634891e-03
Copy-to-CPU Nonblocking Time 4.319824e-03
Testing Size 32768
PMPI_Alltoall Time 1.778633e-03
GPU-Aware Pairwise Exchange Time 5.248636e-03
GPU-Aware Nonblocking Time 4.344705e-03
Copy-to-CPU Pairwise Exchange Time 8.380162e-03
Copy-to-CPU Nonblocking Time 6.037543e-03
Testing Size 65536
PMPI_Alltoall Time 3.476076e-03
GPU-Aware Pairwise Exchange Time 8.120479e-03
GPU-Aware Nonblocking Time 7.978106e-03
Copy-to-CPU Pairwise Exchange Time 1.302828e-02
Copy-to-CPU Nonblocking Time 1.005259e-02
Testing Size 131072
PMPI_Alltoall Time 6.390113e-03
GPU-Aware Pairwise Exchange Time 1.584185e-02
GPU-Aware Nonblocking Time 1.452624e-02
Copy-to-CPU Pairwise Exchange Time 2.179532e-02
Copy-to-CPU Nonblocking Time 1.957825e-02
Testing Size 262144
PMPI_Alltoall Time 1.296962e-02
GPU-Aware Pairwise Exchange Time 3.168885e-02
GPU-Aware Nonblocking Time 2.952491e-02
Copy-to-CPU Pairwise Exchange Time 4.155264e-02
Copy-to-CPU Nonblocking Time 3.696805e-02
Testing Size 524288
PMPI_Alltoall Time 2.583005e-02
GPU-Aware Pairwise Exchange Time 6.667000e-02
GPU-Aware Nonblocking Time 6.275842e-02
Copy-to-CPU Pairwise Exchange Time 8.149962e-02
Copy-to-CPU Nonblocking Time 7.303554e-02
app 0: ./gpu_alltoall 
rank: 0: { host: 1; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 1: { host: 1; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 2: { host: 1; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 3: { host: 1; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 4: { host: 2; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 5: { host: 2; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 6: { host: 2; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 7: { host: 2; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 8: { host: 3; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 9: { host: 3; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 10: { host: 3; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 11: { host: 3; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 12: { host: 4; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 13: { host: 4; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 14: { host: 4; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 15: { host: 4; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
Testing Size 1
PMPI_Alltoall Time 4.414840e-04
Threaded Pairwise Exchange Time 1.631177e-03
Threaded Nonblocking Time 1.272556e-03
Testing Size 2
PMPI_Alltoall Time 4.219879e-04
Threaded Pairwise Exchange Time 1.337979e-03
Threaded Nonblocking Time 1.246005e-03
Testing Size 4
PMPI_Alltoall Time 4.302100e-04
Threaded Pairwise Exchange Time 1.332205e-03
Threaded Nonblocking Time 1.260633e-03
Testing Size 8
PMPI_Alltoall Time 3.972578e-04
Threaded Pairwise Exchange Time 1.295231e-03
Threaded Nonblocking Time 1.267518e-03
Testing Size 16
PMPI_Alltoall Time 4.049954e-04
Threaded Pairwise Exchange Time 1.369567e-03
Threaded Nonblocking Time 1.467033e-03
Testing Size 32
PMPI_Alltoall Time 4.975799e-04
Threaded Pairwise Exchange Time 1.594319e-03
Threaded Nonblocking Time 1.241087e-03
Testing Size 64
PMPI_Alltoall Time 4.879503e-04
Threaded Pairwise Exchange Time 1.590821e-03
Threaded Nonblocking Time 1.253363e-03
Testing Size 128
PMPI_Alltoall Time 4.079704e-04
Threaded Pairwise Exchange Time 1.298201e-03
Threaded Nonblocking Time 1.249210e-03
Testing Size 256
PMPI_Alltoall Time 8.533758e-05
Threaded Pairwise Exchange Time 1.262948e-03
Threaded Nonblocking Time 1.253147e-03
Testing Size 512
PMPI_Alltoall Time 1.083717e-04
Threaded Pairwise Exchange Time 1.263577e-03
Threaded Nonblocking Time 1.482002e-03
Testing Size 1024
PMPI_Alltoall Time 1.544113e-04
Threaded Pairwise Exchange Time 1.403085e-03
Threaded Nonblocking Time 1.524877e-03
Testing Size 2048
PMPI_Alltoall Time 2.968793e-04
Threaded Pairwise Exchange Time 1.482615e-03
Threaded Nonblocking Time 1.338136e-03
Testing Size 4096
PMPI_Alltoall Time 4.285624e-04
Threaded Pairwise Exchange Time 1.439487e-03
Threaded Nonblocking Time 1.402012e-03
Testing Size 8192
PMPI_Alltoall Time 6.871481e-04
Threaded Pairwise Exchange Time 1.692296e-03
Threaded Nonblocking Time 1.637966e-03
Testing Size 16384
PMPI_Alltoall Time 9.035910e-04
Threaded Pairwise Exchange Time 4.335934e-03
Threaded Nonblocking Time 4.279593e-03
Testing Size 32768
PMPI_Alltoall Time 1.719368e-03
Threaded Pairwise Exchange Time 5.890784e-03
Threaded Nonblocking Time 5.854716e-03
Testing Size 65536
PMPI_Alltoall Time 3.450622e-03
Threaded Pairwise Exchange Time 8.968148e-03
Threaded Nonblocking Time 9.042369e-03
Testing Size 131072
PMPI_Alltoall Time 8.070045e-03
Threaded Pairwise Exchange Time 1.811420e-02
Threaded Nonblocking Time 1.658143e-02
Testing Size 262144
PMPI_Alltoall Time 1.386522e-02
Threaded Pairwise Exchange Time 3.093000e-02
Threaded Nonblocking Time 3.100050e-02
Testing Size 524288
PMPI_Alltoall Time 2.813180e-02
Threaded Pairwise Exchange Time 6.163050e-02
Threaded Nonblocking Time 6.136852e-02
app 0: ./gpu_threaded_alltoall 
rank: 0: { host: 1; cpu: {0-39}, {40-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 1: { host: 1; cpu: {40-79}, {0-39,80-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 2: { host: 1; cpu: {80-119}, {0-79,120-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 3: { host: 1; cpu: {120-159}, {0-119} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 4: { host: 2; cpu: {0-39}, {40-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 5: { host: 2; cpu: {40-79}, {0-39,80-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 6: { host: 2; cpu: {80-119}, {0-79,120-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 7: { host: 2; cpu: {120-159}, {0-119} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 8: { host: 3; cpu: {0-39}, {40-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 9: { host: 3; cpu: {40-79}, {0-39,80-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 10: { host: 3; cpu: {80-119}, {0-79,120-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 11: { host: 3; cpu: {120-159}, {0-119} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 12: { host: 4; cpu: {0-39}, {40-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 13: { host: 4; cpu: {40-79}, {0-39,80-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 14: { host: 4; cpu: {80-119}, {0-79,120-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 15: { host: 4; cpu: {120-159}, {0-119} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0

------------------------------------------------------------
Sender: LSF System <lsfadmin@lassen710>
Subject: Job 4927145: <gpu_alltoall4> in cluster <lassen> Done

Job <gpu_alltoall4> was submitted from host <lassen708> by user <bienz1> in cluster <lassen> at Thu Jun 22 15:28:26 2023
Job was executed on host(s) <1*lassen710>, in queue <pbatch>, as user <bienz1> in cluster <lassen> at Thu Jun 22 15:28:30 2023
                            <40*lassen425>
                            <40*lassen759>
                            <40*lassen275>
                            <40*lassen276>
</g/g14/bienz1> was used as the home directory.
</g/g14/bienz1/locality_aware_gpu/benchmark_tests/lassen> was used as the working directory.
Started at Thu Jun 22 15:28:30 2023
Terminated at Thu Jun 22 15:30:29 2023
Results reported at Thu Jun 22 15:30:29 2023

Your job looked like:

------------------------------------------------------------
# LSBATCH: User input
#!/bin/bash
#BSUB -J gpu_alltoall4
#BSUB -e gpu_alltoall4.%J.err
#BSUB -o gpu_alltoall4.%J.out
#BSUB -nnodes 4
#BSUB -q pbatch
#BSUB -W 00:15

cd /g/g14/bienz1/locality_aware_gpu/build_gpu_lassen/benchmarks

jsrun -n4 -r1 -a4 -c4 -g4 -M "-gpu" --latency_priority=gpu-cpu --launch_distribution=packed --print_placement=1 ./gpu_alltoall

export MV2_USE_ALIGNED_ALLOC=1
export OMP_NUM_THREADS=10
jsrun -n4 -r1 -a4 -c40 -g4 -bpacked:10 -dpacked -EOMP_NUM_THREADS=10 -M "-gpu" --latency_priority=gpu-cpu --launch_distribution=packed --print_placement=1 ./gpu_threaded_alltoall



------------------------------------------------------------

Successfully completed.

Resource usage summary:

    CPU time :                                   0.33 sec.
    Max Memory :                                 59 MB
    Average Memory :                             56.69 MB
    Total Requested Memory :                     -
    Delta Memory :                               -
    Max Swap :                                   1425 MB
    Max Processes :                              4
    Max Threads :                                27
    Run time :                                   119 sec.
    Turnaround time :                            123 sec.

The output (if any) is above this job summary.



PS:

Read file <gpu_alltoall4.4927145.err> for stderr output of this job.

