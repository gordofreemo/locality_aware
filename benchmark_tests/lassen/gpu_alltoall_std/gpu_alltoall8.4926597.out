Testing Size 1
PMPI_Alltoall Time 4.410892e-04
GPU-Aware Pairwise Exchange Time 2.084498e-03
GPU-Aware Nonblocking Time 7.880390e-04
Copy-to-CPU Pairwise Exchange Time 1.421304e-03
Copy-to-CPU Nonblocking Time 1.223819e-03
Testing Size 2
PMPI_Alltoall Time 3.980299e-04
GPU-Aware Pairwise Exchange Time 1.812145e-03
GPU-Aware Nonblocking Time 7.470364e-04
Copy-to-CPU Pairwise Exchange Time 1.471520e-03
Copy-to-CPU Nonblocking Time 1.320110e-03
Testing Size 4
PMPI_Alltoall Time 6.639436e-04
GPU-Aware Pairwise Exchange Time 1.877750e-03
GPU-Aware Nonblocking Time 9.519647e-04
Copy-to-CPU Pairwise Exchange Time 1.639539e-03
Copy-to-CPU Nonblocking Time 1.612632e-03
Testing Size 8
PMPI_Alltoall Time 4.810629e-04
GPU-Aware Pairwise Exchange Time 1.829511e-03
GPU-Aware Nonblocking Time 7.499892e-04
Copy-to-CPU Pairwise Exchange Time 1.391716e-03
Copy-to-CPU Nonblocking Time 1.315502e-03
Testing Size 16
PMPI_Alltoall Time 4.969390e-04
GPU-Aware Pairwise Exchange Time 1.919717e-03
GPU-Aware Nonblocking Time 7.464830e-04
Copy-to-CPU Pairwise Exchange Time 1.910177e-03
Copy-to-CPU Nonblocking Time 1.217275e-03
Testing Size 32
PMPI_Alltoall Time 4.754429e-04
GPU-Aware Pairwise Exchange Time 1.963198e-03
GPU-Aware Nonblocking Time 8.150053e-04
Copy-to-CPU Pairwise Exchange Time 1.401807e-03
Copy-to-CPU Nonblocking Time 1.410356e-03
Testing Size 64
PMPI_Alltoall Time 4.140096e-04
GPU-Aware Pairwise Exchange Time 1.861565e-03
GPU-Aware Nonblocking Time 7.481465e-04
Copy-to-CPU Pairwise Exchange Time 1.853894e-03
Copy-to-CPU Nonblocking Time 1.633483e-03
Testing Size 128
PMPI_Alltoall Time 1.039026e-04
GPU-Aware Pairwise Exchange Time 2.274520e-03
GPU-Aware Nonblocking Time 9.277852e-04
Copy-to-CPU Pairwise Exchange Time 1.428817e-03
Copy-to-CPU Nonblocking Time 1.248230e-03
Testing Size 256
PMPI_Alltoall Time 1.126479e-04
GPU-Aware Pairwise Exchange Time 1.787434e-03
GPU-Aware Nonblocking Time 8.112441e-04
Copy-to-CPU Pairwise Exchange Time 1.412536e-03
Copy-to-CPU Nonblocking Time 1.235490e-03
Testing Size 512
PMPI_Alltoall Time 1.506863e-04
GPU-Aware Pairwise Exchange Time 1.891293e-03
GPU-Aware Nonblocking Time 8.086046e-04
Copy-to-CPU Pairwise Exchange Time 1.736592e-03
Copy-to-CPU Nonblocking Time 1.912494e-03
Testing Size 1024
PMPI_Alltoall Time 2.290890e-04
GPU-Aware Pairwise Exchange Time 2.049529e-03
GPU-Aware Nonblocking Time 7.483821e-04
Copy-to-CPU Pairwise Exchange Time 1.499373e-03
Copy-to-CPU Nonblocking Time 1.286181e-03
Testing Size 2048
PMPI_Alltoall Time 3.690795e-04
GPU-Aware Pairwise Exchange Time 1.901530e-03
GPU-Aware Nonblocking Time 7.503836e-04
Copy-to-CPU Pairwise Exchange Time 1.771928e-03
Copy-to-CPU Nonblocking Time 1.387400e-03
Testing Size 4096
PMPI_Alltoall Time 6.631805e-04
GPU-Aware Pairwise Exchange Time 2.275023e-03
GPU-Aware Nonblocking Time 8.255100e-04
Copy-to-CPU Pairwise Exchange Time 2.989187e-03
Copy-to-CPU Nonblocking Time 1.856269e-03
Testing Size 8192
PMPI_Alltoall Time 1.254081e-03
GPU-Aware Pairwise Exchange Time 2.589193e-03
GPU-Aware Nonblocking Time 8.098981e-04
Copy-to-CPU Pairwise Exchange Time 4.153281e-03
Copy-to-CPU Nonblocking Time 3.147017e-03
Testing Size 16384
PMPI_Alltoall Time 2.522580e-03
GPU-Aware Pairwise Exchange Time 3.039320e-03
GPU-Aware Nonblocking Time 1.415020e-03
Copy-to-CPU Pairwise Exchange Time 1.284063e-02
Copy-to-CPU Nonblocking Time 7.931885e-03
Testing Size 32768
PMPI_Alltoall Time 4.709811e-03
GPU-Aware Pairwise Exchange Time 3.888522e-03
GPU-Aware Nonblocking Time 2.389266e-03
Copy-to-CPU Pairwise Exchange Time 1.672778e-02
Copy-to-CPU Nonblocking Time 1.253430e-02
Testing Size 65536
PMPI_Alltoall Time 7.451817e-03
GPU-Aware Pairwise Exchange Time 6.137388e-03
GPU-Aware Nonblocking Time 4.709179e-03
Copy-to-CPU Pairwise Exchange Time 2.638809e-02
Copy-to-CPU Nonblocking Time 2.094314e-02
Testing Size 131072
PMPI_Alltoall Time 1.488189e-02
GPU-Aware Pairwise Exchange Time 1.053888e-02
GPU-Aware Nonblocking Time 8.263249e-03
Copy-to-CPU Pairwise Exchange Time 4.715521e-02
Copy-to-CPU Nonblocking Time 3.970351e-02
Testing Size 262144
PMPI_Alltoall Time 2.872403e-02
GPU-Aware Pairwise Exchange Time 1.951516e-02
GPU-Aware Nonblocking Time 1.588456e-02
Copy-to-CPU Pairwise Exchange Time 8.746353e-02
Copy-to-CPU Nonblocking Time 7.868302e-02
Testing Size 524288
PMPI_Alltoall Time 5.706412e-02
GPU-Aware Pairwise Exchange Time 3.781574e-02
GPU-Aware Nonblocking Time 3.202654e-02
Copy-to-CPU Pairwise Exchange Time 1.701620e-01
Copy-to-CPU Nonblocking Time 1.534329e-01
app 0: ./gpu_alltoall 
rank: 0: { host: 1; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 1: { host: 1; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 2: { host: 1; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 3: { host: 1; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 4: { host: 2; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 5: { host: 2; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 6: { host: 2; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 7: { host: 2; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 8: { host: 3; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 9: { host: 3; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 10: { host: 3; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 11: { host: 3; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 12: { host: 4; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 13: { host: 4; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 14: { host: 4; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 15: { host: 4; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 16: { host: 5; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 17: { host: 5; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 18: { host: 5; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 19: { host: 5; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 20: { host: 6; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 21: { host: 6; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 22: { host: 6; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 23: { host: 6; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 24: { host: 7; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 25: { host: 7; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 26: { host: 7; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 27: { host: 7; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 28: { host: 8; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 29: { host: 8; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 30: { host: 8; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 31: { host: 8; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
Testing Size 1
PMPI_Alltoall Time 6.732170e-04
Threaded Pairwise Exchange Time 1.457739e-03
Threaded Nonblocking Time 1.289480e-03
Testing Size 2
PMPI_Alltoall Time 4.422393e-04
Threaded Pairwise Exchange Time 1.571627e-03
Threaded Nonblocking Time 1.288266e-03
Testing Size 4
PMPI_Alltoall Time 4.192920e-04
Threaded Pairwise Exchange Time 1.437732e-03
Threaded Nonblocking Time 1.266243e-03
Testing Size 8
PMPI_Alltoall Time 4.085775e-04
Threaded Pairwise Exchange Time 1.354019e-03
Threaded Nonblocking Time 1.284749e-03
Testing Size 16
PMPI_Alltoall Time 4.068698e-04
Threaded Pairwise Exchange Time 1.755788e-03
Threaded Nonblocking Time 1.398398e-03
Testing Size 32
PMPI_Alltoall Time 4.114558e-04
Threaded Pairwise Exchange Time 1.575588e-03
Threaded Nonblocking Time 1.699455e-03
Testing Size 64
PMPI_Alltoall Time 4.753073e-04
Threaded Pairwise Exchange Time 1.589327e-03
Threaded Nonblocking Time 2.365539e-03
Testing Size 128
PMPI_Alltoall Time 1.034043e-04
Threaded Pairwise Exchange Time 1.432504e-03
Threaded Nonblocking Time 1.583551e-03
Testing Size 256
PMPI_Alltoall Time 1.244386e-04
Threaded Pairwise Exchange Time 1.341683e-03
Threaded Nonblocking Time 1.289495e-03
Testing Size 512
PMPI_Alltoall Time 1.512007e-04
Threaded Pairwise Exchange Time 1.449723e-03
Threaded Nonblocking Time 1.364304e-03
Testing Size 1024
PMPI_Alltoall Time 2.341901e-04
Threaded Pairwise Exchange Time 1.554647e-03
Threaded Nonblocking Time 1.425648e-03
Testing Size 2048
PMPI_Alltoall Time 4.306459e-04
Threaded Pairwise Exchange Time 1.619853e-03
Threaded Nonblocking Time 1.921707e-03
Testing Size 4096
PMPI_Alltoall Time 8.829960e-04
Threaded Pairwise Exchange Time 2.135295e-03
Threaded Nonblocking Time 1.626384e-03
Testing Size 8192
PMPI_Alltoall Time 1.206946e-03
Threaded Pairwise Exchange Time 3.134512e-03
Threaded Nonblocking Time 3.015180e-03
Testing Size 16384
PMPI_Alltoall Time 2.161594e-03
Threaded Pairwise Exchange Time 1.140234e-02
Threaded Nonblocking Time 8.472723e-03
Testing Size 32768
PMPI_Alltoall Time 4.157628e-03
Threaded Pairwise Exchange Time 1.119688e-02
Threaded Nonblocking Time 1.178347e-02
Testing Size 65536
PMPI_Alltoall Time 1.080483e-02
Threaded Pairwise Exchange Time 2.185596e-02
Threaded Nonblocking Time 1.873217e-02
Testing Size 131072
PMPI_Alltoall Time 1.553217e-02
Threaded Pairwise Exchange Time 3.213213e-02
Threaded Nonblocking Time 3.557784e-02
Testing Size 262144
PMPI_Alltoall Time 2.927831e-02
Threaded Pairwise Exchange Time 6.826466e-02
Threaded Nonblocking Time 7.276650e-02
Testing Size 524288
PMPI_Alltoall Time 5.733968e-02
Threaded Pairwise Exchange Time 1.254907e-01
Threaded Nonblocking Time 1.305843e-01
app 0: ./gpu_threaded_alltoall 
rank: 0: { host: 1; cpu: {0-39}, {40-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 1: { host: 1; cpu: {40-79}, {0-39,80-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 2: { host: 1; cpu: {80-119}, {0-79,120-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 3: { host: 1; cpu: {120-159}, {0-119} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 4: { host: 2; cpu: {0-39}, {40-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 5: { host: 2; cpu: {40-79}, {0-39,80-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 6: { host: 2; cpu: {80-119}, {0-79,120-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 7: { host: 2; cpu: {120-159}, {0-119} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 8: { host: 3; cpu: {0-39}, {40-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 9: { host: 3; cpu: {40-79}, {0-39,80-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 10: { host: 3; cpu: {80-119}, {0-79,120-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 11: { host: 3; cpu: {120-159}, {0-119} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 12: { host: 4; cpu: {0-39}, {40-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 13: { host: 4; cpu: {40-79}, {0-39,80-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 14: { host: 4; cpu: {80-119}, {0-79,120-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 15: { host: 4; cpu: {120-159}, {0-119} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 16: { host: 5; cpu: {0-39}, {40-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 17: { host: 5; cpu: {40-79}, {0-39,80-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 18: { host: 5; cpu: {80-119}, {0-79,120-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 19: { host: 5; cpu: {120-159}, {0-119} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 20: { host: 6; cpu: {0-39}, {40-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 21: { host: 6; cpu: {40-79}, {0-39,80-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 22: { host: 6; cpu: {80-119}, {0-79,120-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 23: { host: 6; cpu: {120-159}, {0-119} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 24: { host: 7; cpu: {0-39}, {40-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 25: { host: 7; cpu: {40-79}, {0-39,80-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 26: { host: 7; cpu: {80-119}, {0-79,120-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 27: { host: 7; cpu: {120-159}, {0-119} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 28: { host: 8; cpu: {0-39}, {40-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 29: { host: 8; cpu: {40-79}, {0-39,80-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 30: { host: 8; cpu: {80-119}, {0-79,120-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 31: { host: 8; cpu: {120-159}, {0-119} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0

------------------------------------------------------------
Sender: LSF System <lsfadmin@lassen710>
Subject: Job 4926597: <gpu_alltoall8> in cluster <lassen> Done

Job <gpu_alltoall8> was submitted from host <lassen708> by user <bienz1> in cluster <lassen> at Thu Jun 22 13:53:52 2023
Job was executed on host(s) <1*lassen710>, in queue <pbatch>, as user <bienz1> in cluster <lassen> at Thu Jun 22 13:53:55 2023
                            <40*lassen584>
                            <40*lassen427>
                            <40*lassen770>
                            <40*lassen773>
                            <40*lassen295>
                            <40*lassen120>
                            <40*lassen122>
                            <40*lassen789>
</g/g14/bienz1> was used as the home directory.
</g/g14/bienz1/locality_aware_gpu/benchmark_tests/lassen> was used as the working directory.
Started at Thu Jun 22 13:53:55 2023
Terminated at Thu Jun 22 13:56:43 2023
Results reported at Thu Jun 22 13:56:43 2023

Your job looked like:

------------------------------------------------------------
# LSBATCH: User input
#!/bin/bash
#BSUB -J gpu_alltoall8
#BSUB -e gpu_alltoall8.%J.err
#BSUB -o gpu_alltoall8.%J.out
#BSUB -nnodes 8
#BSUB -q pbatch
#BSUB -W 00:15

cd /g/g14/bienz1/locality_aware_gpu/build_gpu_lassen/benchmarks

jsrun -n8 -r1 -a4 -c4 -g4 -M "-gpu" --latency_priority=gpu-cpu --launch_distribution=packed --print_placement=1 ./gpu_alltoall

export MV2_USE_ALIGNED_ALLOC=1
export OMP_NUM_THREADS=10
jsrun -n8 -r1 -a4 -c40 -g4 -bpacked:10 -dpacked -EOMP_NUM_THREADS=10 -M "-gpu" --latency_priority=gpu-cpu --launch_distribution=packed --print_placement=1 ./gpu_threaded_alltoall



------------------------------------------------------------

Successfully completed.

Resource usage summary:

    CPU time :                                   2.00 sec.
    Max Memory :                                 59 MB
    Average Memory :                             56.00 MB
    Total Requested Memory :                     -
    Delta Memory :                               -
    Max Swap :                                   1425 MB
    Max Processes :                              4
    Max Threads :                                27
    Run time :                                   169 sec.
    Turnaround time :                            171 sec.

The output (if any) is above this job summary.



PS:

Read file <gpu_alltoall8.4926597.err> for stderr output of this job.

