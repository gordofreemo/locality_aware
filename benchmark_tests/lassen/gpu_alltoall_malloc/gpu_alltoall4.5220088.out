Testing Size 1
PMPI_Alltoall Time 4.478656e-04
GPU-Aware Pairwise Exchange Time 2.495912e-03
GPU-Aware Nonblocking Time 1.947575e-03
Copy-to-CPU Pairwise Exchange Time 1.417724e-03
Copy-to-CPU Nonblocking Time 1.279070e-03
Testing Size 2
PMPI_Alltoall Time 3.970105e-04
GPU-Aware Pairwise Exchange Time 2.725782e-03
GPU-Aware Nonblocking Time 1.970376e-03
Copy-to-CPU Pairwise Exchange Time 1.611884e-03
Copy-to-CPU Nonblocking Time 1.185715e-03
Testing Size 4
PMPI_Alltoall Time 5.522034e-04
GPU-Aware Pairwise Exchange Time 2.718376e-03
GPU-Aware Nonblocking Time 2.082494e-03
Copy-to-CPU Pairwise Exchange Time 1.346843e-03
Copy-to-CPU Nonblocking Time 1.229221e-03
Testing Size 8
PMPI_Alltoall Time 4.054744e-04
GPU-Aware Pairwise Exchange Time 2.459712e-03
GPU-Aware Nonblocking Time 1.979735e-03
Copy-to-CPU Pairwise Exchange Time 1.268257e-03
Copy-to-CPU Nonblocking Time 1.424511e-03
Testing Size 16
PMPI_Alltoall Time 4.072878e-04
GPU-Aware Pairwise Exchange Time 2.619356e-03
GPU-Aware Nonblocking Time 1.895993e-03
Copy-to-CPU Pairwise Exchange Time 1.455711e-03
Copy-to-CPU Nonblocking Time 1.221385e-03
Testing Size 32
PMPI_Alltoall Time 4.025672e-04
GPU-Aware Pairwise Exchange Time 2.590745e-03
GPU-Aware Nonblocking Time 1.818814e-03
Copy-to-CPU Pairwise Exchange Time 1.569508e-03
Copy-to-CPU Nonblocking Time 1.205611e-03
Testing Size 64
PMPI_Alltoall Time 4.091557e-04
GPU-Aware Pairwise Exchange Time 2.375640e-03
GPU-Aware Nonblocking Time 1.874113e-03
Copy-to-CPU Pairwise Exchange Time 1.309096e-03
Copy-to-CPU Nonblocking Time 1.195496e-03
Testing Size 128
PMPI_Alltoall Time 4.106760e-04
GPU-Aware Pairwise Exchange Time 2.293212e-03
GPU-Aware Nonblocking Time 2.015178e-03
Copy-to-CPU Pairwise Exchange Time 1.301951e-03
Copy-to-CPU Nonblocking Time 1.272275e-03
Testing Size 256
PMPI_Alltoall Time 8.782617e-05
GPU-Aware Pairwise Exchange Time 2.506020e-03
GPU-Aware Nonblocking Time 1.843940e-03
Copy-to-CPU Pairwise Exchange Time 1.324014e-03
Copy-to-CPU Nonblocking Time 1.332555e-03
Testing Size 512
PMPI_Alltoall Time 1.053457e-04
GPU-Aware Pairwise Exchange Time 2.294767e-03
GPU-Aware Nonblocking Time 2.202714e-03
Copy-to-CPU Pairwise Exchange Time 1.344764e-03
Copy-to-CPU Nonblocking Time 1.281090e-03
Testing Size 1024
PMPI_Alltoall Time 1.481358e-04
GPU-Aware Pairwise Exchange Time 2.616832e-03
GPU-Aware Nonblocking Time 1.987727e-03
Copy-to-CPU Pairwise Exchange Time 1.499729e-03
Copy-to-CPU Nonblocking Time 1.568578e-03
Testing Size 2048
PMPI_Alltoall Time 2.171285e-04
GPU-Aware Pairwise Exchange Time 2.519555e-03
GPU-Aware Nonblocking Time 1.837709e-03
Copy-to-CPU Pairwise Exchange Time 1.485297e-03
Copy-to-CPU Nonblocking Time 1.322890e-03
Testing Size 4096
PMPI_Alltoall Time 3.478460e-04
GPU-Aware Pairwise Exchange Time 2.668675e-03
GPU-Aware Nonblocking Time 1.873624e-03
Copy-to-CPU Pairwise Exchange Time 1.541609e-03
Copy-to-CPU Nonblocking Time 1.348297e-03
Testing Size 8192
PMPI_Alltoall Time 6.373742e-04
GPU-Aware Pairwise Exchange Time 2.556164e-03
GPU-Aware Nonblocking Time 1.968469e-03
Copy-to-CPU Pairwise Exchange Time 1.863558e-03
Copy-to-CPU Nonblocking Time 1.705122e-03
Testing Size 16384
PMPI_Alltoall Time 9.034713e-04
GPU-Aware Pairwise Exchange Time 3.761703e-03
GPU-Aware Nonblocking Time 2.899318e-03
Copy-to-CPU Pairwise Exchange Time 6.304558e-03
Copy-to-CPU Nonblocking Time 4.439956e-03
Testing Size 32768
PMPI_Alltoall Time 1.743498e-03
GPU-Aware Pairwise Exchange Time 5.755646e-03
GPU-Aware Nonblocking Time 4.974937e-03
Copy-to-CPU Pairwise Exchange Time 8.466446e-03
Copy-to-CPU Nonblocking Time 5.976892e-03
Testing Size 65536
PMPI_Alltoall Time 3.444415e-03
GPU-Aware Pairwise Exchange Time 8.977013e-03
GPU-Aware Nonblocking Time 8.012750e-03
Copy-to-CPU Pairwise Exchange Time 1.236262e-02
Copy-to-CPU Nonblocking Time 9.602804e-03
Testing Size 131072
PMPI_Alltoall Time 6.350536e-03
GPU-Aware Pairwise Exchange Time 1.605817e-02
GPU-Aware Nonblocking Time 1.510043e-02
Copy-to-CPU Pairwise Exchange Time 2.170356e-02
Copy-to-CPU Nonblocking Time 1.839541e-02
Testing Size 262144
PMPI_Alltoall Time 1.353506e-02
GPU-Aware Pairwise Exchange Time 3.204496e-02
GPU-Aware Nonblocking Time 2.981382e-02
Copy-to-CPU Pairwise Exchange Time 4.047210e-02
Copy-to-CPU Nonblocking Time 3.616936e-02
Testing Size 524288
PMPI_Alltoall Time 2.653293e-02
GPU-Aware Pairwise Exchange Time 6.484437e-02
GPU-Aware Nonblocking Time 6.189113e-02
Copy-to-CPU Pairwise Exchange Time 7.803869e-02
Copy-to-CPU Nonblocking Time 7.294376e-02
app 0: ./gpu_alltoall 
rank: 0: { host: 1; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 1: { host: 1; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 2: { host: 1; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 3: { host: 1; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 4: { host: 2; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 5: { host: 2; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 6: { host: 2; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 7: { host: 2; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 8: { host: 3; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 9: { host: 3; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 10: { host: 3; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 11: { host: 3; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 12: { host: 4; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 13: { host: 4; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 14: { host: 4; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 15: { host: 4; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
Testing Size 1
PMPI_Alltoall Time 4.378815e-04
Threaded Pairwise Exchange Time 1.360457e-03
Threaded Nonblocking Time 1.217155e-03
Testing Size 2
PMPI_Alltoall Time 4.392473e-04
Threaded Pairwise Exchange Time 1.495383e-03
Threaded Nonblocking Time 1.267434e-03
Testing Size 4
PMPI_Alltoall Time 4.162853e-04
Threaded Pairwise Exchange Time 1.434180e-03
Threaded Nonblocking Time 1.277728e-03
Testing Size 8
PMPI_Alltoall Time 4.940837e-04
Threaded Pairwise Exchange Time 1.257482e-03
Threaded Nonblocking Time 1.331533e-03
Testing Size 16
PMPI_Alltoall Time 3.986540e-04
Threaded Pairwise Exchange Time 1.408210e-03
Threaded Nonblocking Time 1.396941e-03
Testing Size 32
PMPI_Alltoall Time 3.994304e-04
Threaded Pairwise Exchange Time 1.847394e-03
Threaded Nonblocking Time 1.306535e-03
Testing Size 64
PMPI_Alltoall Time 4.041678e-04
Threaded Pairwise Exchange Time 1.328308e-03
Threaded Nonblocking Time 1.258073e-03
Testing Size 128
PMPI_Alltoall Time 4.100803e-04
Threaded Pairwise Exchange Time 1.272300e-03
Threaded Nonblocking Time 1.280755e-03
Testing Size 256
PMPI_Alltoall Time 8.348366e-05
Threaded Pairwise Exchange Time 1.274198e-03
Threaded Nonblocking Time 1.307363e-03
Testing Size 512
PMPI_Alltoall Time 1.101782e-04
Threaded Pairwise Exchange Time 1.434609e-03
Threaded Nonblocking Time 1.686539e-03
Testing Size 1024
PMPI_Alltoall Time 1.477173e-04
Threaded Pairwise Exchange Time 1.369432e-03
Threaded Nonblocking Time 2.011894e-03
Testing Size 2048
PMPI_Alltoall Time 2.223790e-04
Threaded Pairwise Exchange Time 1.350196e-03
Threaded Nonblocking Time 1.320623e-03
Testing Size 4096
PMPI_Alltoall Time 3.344282e-04
Threaded Pairwise Exchange Time 1.473326e-03
Threaded Nonblocking Time 1.421441e-03
Testing Size 8192
PMPI_Alltoall Time 6.073306e-04
Threaded Pairwise Exchange Time 1.675857e-03
Threaded Nonblocking Time 1.653556e-03
Testing Size 16384
PMPI_Alltoall Time 9.155883e-04
Threaded Pairwise Exchange Time 4.495654e-03
Threaded Nonblocking Time 4.470957e-03
Testing Size 32768
PMPI_Alltoall Time 1.757480e-03
Threaded Pairwise Exchange Time 5.952286e-03
Threaded Nonblocking Time 5.882442e-03
Testing Size 65536
PMPI_Alltoall Time 3.453915e-03
Threaded Pairwise Exchange Time 9.550988e-03
Threaded Nonblocking Time 1.020519e-02
Testing Size 131072
PMPI_Alltoall Time 8.080167e-03
Threaded Pairwise Exchange Time 1.771150e-02
Threaded Nonblocking Time 1.928539e-02
Testing Size 262144
PMPI_Alltoall Time 1.542293e-02
Threaded Pairwise Exchange Time 3.306627e-02
Threaded Nonblocking Time 3.049321e-02
Testing Size 524288
PMPI_Alltoall Time 2.689286e-02
Threaded Pairwise Exchange Time 6.412117e-02
Threaded Nonblocking Time 6.247885e-02
app 0: ./gpu_threaded_alltoall 
rank: 0: { host: 1; cpu: {0-39}, {40-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 1: { host: 1; cpu: {40-79}, {0-39,80-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 2: { host: 1; cpu: {80-119}, {0-79,120-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 3: { host: 1; cpu: {120-159}, {0-119} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 4: { host: 2; cpu: {0-39}, {40-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 5: { host: 2; cpu: {40-79}, {0-39,80-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 6: { host: 2; cpu: {80-119}, {0-79,120-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 7: { host: 2; cpu: {120-159}, {0-119} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 8: { host: 3; cpu: {0-39}, {40-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 9: { host: 3; cpu: {40-79}, {0-39,80-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 10: { host: 3; cpu: {80-119}, {0-79,120-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 11: { host: 3; cpu: {120-159}, {0-119} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 12: { host: 4; cpu: {0-39}, {40-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 13: { host: 4; cpu: {40-79}, {0-39,80-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 14: { host: 4; cpu: {80-119}, {0-79,120-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 15: { host: 4; cpu: {120-159}, {0-119} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0

------------------------------------------------------------
Sender: LSF System <lsfadmin@lassen710>
Subject: Job 5220088: <gpu_alltoall4> in cluster <lassen> Done

Job <gpu_alltoall4> was submitted from host <lassen709> by user <bienz1> in cluster <lassen> at Fri Sep 22 15:55:36 2023
Job was executed on host(s) <1*lassen710>, in queue <pbatch>, as user <bienz1> in cluster <lassen> at Fri Sep 22 15:56:13 2023
                            <40*lassen323>
                            <40*lassen675>
                            <40*lassen346>
                            <40*lassen70>
</g/g14/bienz1> was used as the home directory.
</g/g14/bienz1/locality_aware_gpu/benchmark_tests/lassen> was used as the working directory.
Started at Fri Sep 22 15:56:13 2023
Terminated at Fri Sep 22 15:58:11 2023
Results reported at Fri Sep 22 15:58:11 2023

Your job looked like:

------------------------------------------------------------
# LSBATCH: User input
#!/bin/bash
#BSUB -J gpu_alltoall4
#BSUB -e gpu_alltoall4.%J.err
#BSUB -o gpu_alltoall4.%J.out
#BSUB -nnodes 4
#BSUB -q pbatch
#BSUB -W 00:15

cd /g/g14/bienz1/locality_aware_gpu/build_gpu_lassen/benchmarks

jsrun -n4 -r1 -a4 -c4 -g4 -M "-gpu" --latency_priority=gpu-cpu --launch_distribution=packed --print_placement=1 ./gpu_alltoall

export MV2_USE_ALIGNED_ALLOC=1
export OMP_NUM_THREADS=10
jsrun -n4 -r1 -a4 -c40 -g4 -bpacked:10 -dpacked -EOMP_NUM_THREADS=10 -M "-gpu" --latency_priority=gpu-cpu --launch_distribution=packed --print_placement=1 ./gpu_threaded_alltoall



------------------------------------------------------------

Successfully completed.

Resource usage summary:

    CPU time :                                   0.25 sec.
    Max Memory :                                 59 MB
    Average Memory :                             56.86 MB
    Total Requested Memory :                     -
    Delta Memory :                               -
    Max Swap :                                   1425 MB
    Max Processes :                              4
    Max Threads :                                27
    Run time :                                   117 sec.
    Turnaround time :                            155 sec.

The output (if any) is above this job summary.



PS:

Read file <gpu_alltoall4.5220088.err> for stderr output of this job.

