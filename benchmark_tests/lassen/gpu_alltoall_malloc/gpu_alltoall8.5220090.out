Testing Size 1
PMPI_Alltoall Time 4.289405e-04
GPU-Aware Pairwise Exchange Time 2.749499e-03
GPU-Aware Nonblocking Time 2.240312e-03
Copy-to-CPU Pairwise Exchange Time 1.641902e-03
Copy-to-CPU Nonblocking Time 1.343881e-03
Testing Size 2
PMPI_Alltoall Time 3.950018e-04
GPU-Aware Pairwise Exchange Time 2.704968e-03
GPU-Aware Nonblocking Time 2.489825e-03
Copy-to-CPU Pairwise Exchange Time 1.408932e-03
Copy-to-CPU Nonblocking Time 1.639679e-03
Testing Size 4
PMPI_Alltoall Time 3.962546e-04
GPU-Aware Pairwise Exchange Time 3.260051e-03
GPU-Aware Nonblocking Time 2.170338e-03
Copy-to-CPU Pairwise Exchange Time 1.420018e-03
Copy-to-CPU Nonblocking Time 1.619301e-03
Testing Size 8
PMPI_Alltoall Time 5.655616e-04
GPU-Aware Pairwise Exchange Time 2.956343e-03
GPU-Aware Nonblocking Time 2.070502e-03
Copy-to-CPU Pairwise Exchange Time 1.353470e-03
Copy-to-CPU Nonblocking Time 1.390973e-03
Testing Size 16
PMPI_Alltoall Time 4.001785e-04
GPU-Aware Pairwise Exchange Time 2.483066e-03
GPU-Aware Nonblocking Time 1.875313e-03
Copy-to-CPU Pairwise Exchange Time 1.563926e-03
Copy-to-CPU Nonblocking Time 1.906838e-03
Testing Size 32
PMPI_Alltoall Time 4.043753e-04
GPU-Aware Pairwise Exchange Time 3.667902e-03
GPU-Aware Nonblocking Time 2.051871e-03
Copy-to-CPU Pairwise Exchange Time 1.486065e-03
Copy-to-CPU Nonblocking Time 1.281635e-03
Testing Size 64
PMPI_Alltoall Time 4.087830e-04
GPU-Aware Pairwise Exchange Time 2.599387e-03
GPU-Aware Nonblocking Time 1.985404e-03
Copy-to-CPU Pairwise Exchange Time 1.438310e-03
Copy-to-CPU Nonblocking Time 1.328841e-03
Testing Size 128
PMPI_Alltoall Time 1.119436e-04
GPU-Aware Pairwise Exchange Time 3.008758e-03
GPU-Aware Nonblocking Time 2.221143e-03
Copy-to-CPU Pairwise Exchange Time 1.544816e-03
Copy-to-CPU Nonblocking Time 1.729892e-03
Testing Size 256
PMPI_Alltoall Time 1.174697e-04
GPU-Aware Pairwise Exchange Time 3.123095e-03
GPU-Aware Nonblocking Time 2.217011e-03
Copy-to-CPU Pairwise Exchange Time 1.386851e-03
Copy-to-CPU Nonblocking Time 1.341220e-03
Testing Size 512
PMPI_Alltoall Time 1.516572e-04
GPU-Aware Pairwise Exchange Time 2.925781e-03
GPU-Aware Nonblocking Time 2.099875e-03
Copy-to-CPU Pairwise Exchange Time 1.593942e-03
Copy-to-CPU Nonblocking Time 1.565041e-03
Testing Size 1024
PMPI_Alltoall Time 2.930102e-04
GPU-Aware Pairwise Exchange Time 2.889815e-03
GPU-Aware Nonblocking Time 1.957745e-03
Copy-to-CPU Pairwise Exchange Time 1.736407e-03
Copy-to-CPU Nonblocking Time 1.338471e-03
Testing Size 2048
PMPI_Alltoall Time 3.717970e-04
GPU-Aware Pairwise Exchange Time 2.597497e-03
GPU-Aware Nonblocking Time 1.875570e-03
Copy-to-CPU Pairwise Exchange Time 2.107738e-03
Copy-to-CPU Nonblocking Time 1.506126e-03
Testing Size 4096
PMPI_Alltoall Time 7.372070e-04
GPU-Aware Pairwise Exchange Time 3.531774e-03
GPU-Aware Nonblocking Time 1.921588e-03
Copy-to-CPU Pairwise Exchange Time 2.038477e-03
Copy-to-CPU Nonblocking Time 1.658486e-03
Testing Size 8192
PMPI_Alltoall Time 1.275567e-03
GPU-Aware Pairwise Exchange Time 5.049456e-03
GPU-Aware Nonblocking Time 3.156368e-03
Copy-to-CPU Pairwise Exchange Time 3.725493e-03
Copy-to-CPU Nonblocking Time 3.207163e-03
Testing Size 16384
PMPI_Alltoall Time 2.598400e-03
GPU-Aware Pairwise Exchange Time 6.227884e-03
GPU-Aware Nonblocking Time 4.586370e-03
Copy-to-CPU Pairwise Exchange Time 1.313804e-02
Copy-to-CPU Nonblocking Time 8.305799e-03
Testing Size 32768
PMPI_Alltoall Time 4.675805e-03
GPU-Aware Pairwise Exchange Time 9.426806e-03
GPU-Aware Nonblocking Time 8.105397e-03
Copy-to-CPU Pairwise Exchange Time 1.723727e-02
Copy-to-CPU Nonblocking Time 1.187723e-02
Testing Size 65536
PMPI_Alltoall Time 7.335484e-03
GPU-Aware Pairwise Exchange Time 1.707679e-02
GPU-Aware Nonblocking Time 1.646203e-02
Copy-to-CPU Pairwise Exchange Time 2.609886e-02
Copy-to-CPU Nonblocking Time 2.166735e-02
Testing Size 131072
PMPI_Alltoall Time 1.477153e-02
GPU-Aware Pairwise Exchange Time 3.433886e-02
GPU-Aware Nonblocking Time 3.226802e-02
Copy-to-CPU Pairwise Exchange Time 4.679633e-02
Copy-to-CPU Nonblocking Time 4.016168e-02
Testing Size 262144
PMPI_Alltoall Time 2.873804e-02
GPU-Aware Pairwise Exchange Time 6.732115e-02
GPU-Aware Nonblocking Time 6.653866e-02
Copy-to-CPU Pairwise Exchange Time 8.676796e-02
Copy-to-CPU Nonblocking Time 7.910419e-02
Testing Size 524288
PMPI_Alltoall Time 5.712220e-02
GPU-Aware Pairwise Exchange Time 1.331441e-01
GPU-Aware Nonblocking Time 1.283745e-01
Copy-to-CPU Pairwise Exchange Time 1.655764e-01
Copy-to-CPU Nonblocking Time 1.516689e-01
app 0: ./gpu_alltoall 
rank: 0: { host: 1; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 1: { host: 1; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 2: { host: 1; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 3: { host: 1; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 4: { host: 2; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 5: { host: 2; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 6: { host: 2; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 7: { host: 2; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 8: { host: 3; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 9: { host: 3; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 10: { host: 3; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 11: { host: 3; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 12: { host: 4; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 13: { host: 4; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 14: { host: 4; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 15: { host: 4; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 16: { host: 5; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 17: { host: 5; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 18: { host: 5; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 19: { host: 5; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 20: { host: 6; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 21: { host: 6; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 22: { host: 6; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 23: { host: 6; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 24: { host: 7; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 25: { host: 7; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 26: { host: 7; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 27: { host: 7; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 28: { host: 8; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 29: { host: 8; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 30: { host: 8; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 31: { host: 8; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
Testing Size 1
PMPI_Alltoall Time 6.695584e-04
Threaded Pairwise Exchange Time 1.493210e-03
Threaded Nonblocking Time 1.380380e-03
Testing Size 2
PMPI_Alltoall Time 4.434284e-04
Threaded Pairwise Exchange Time 1.525490e-03
Threaded Nonblocking Time 1.357597e-03
Testing Size 4
PMPI_Alltoall Time 4.222775e-04
Threaded Pairwise Exchange Time 1.482738e-03
Threaded Nonblocking Time 1.386210e-03
Testing Size 8
PMPI_Alltoall Time 4.161838e-04
Threaded Pairwise Exchange Time 1.523632e-03
Threaded Nonblocking Time 1.298451e-03
Testing Size 16
PMPI_Alltoall Time 4.194059e-04
Threaded Pairwise Exchange Time 1.487107e-03
Threaded Nonblocking Time 1.488730e-03
Testing Size 32
PMPI_Alltoall Time 4.214812e-04
Threaded Pairwise Exchange Time 1.460303e-03
Threaded Nonblocking Time 2.374823e-03
Testing Size 64
PMPI_Alltoall Time 5.902840e-04
Threaded Pairwise Exchange Time 2.217961e-03
Threaded Nonblocking Time 1.871062e-03
Testing Size 128
PMPI_Alltoall Time 1.746359e-04
Threaded Pairwise Exchange Time 1.419780e-03
Threaded Nonblocking Time 1.451047e-03
Testing Size 256
PMPI_Alltoall Time 1.189211e-04
Threaded Pairwise Exchange Time 1.384336e-03
Threaded Nonblocking Time 1.748700e-03
Testing Size 512
PMPI_Alltoall Time 2.158480e-04
Threaded Pairwise Exchange Time 1.488052e-03
Threaded Nonblocking Time 1.455294e-03
Testing Size 1024
PMPI_Alltoall Time 2.435298e-04
Threaded Pairwise Exchange Time 1.542323e-03
Threaded Nonblocking Time 1.552837e-03
Testing Size 2048
PMPI_Alltoall Time 4.414250e-04
Threaded Pairwise Exchange Time 2.092585e-03
Threaded Nonblocking Time 1.660299e-03
Testing Size 4096
PMPI_Alltoall Time 7.799570e-04
Threaded Pairwise Exchange Time 1.892801e-03
Threaded Nonblocking Time 1.960951e-03
Testing Size 8192
PMPI_Alltoall Time 1.250817e-03
Threaded Pairwise Exchange Time 3.259620e-03
Threaded Nonblocking Time 6.156151e-03
Testing Size 16384
PMPI_Alltoall Time 2.166324e-03
Threaded Pairwise Exchange Time 1.105172e-02
Threaded Nonblocking Time 8.393363e-03
Testing Size 32768
PMPI_Alltoall Time 4.924335e-03
Threaded Pairwise Exchange Time 1.623295e-02
Threaded Nonblocking Time 1.378765e-02
Testing Size 65536
PMPI_Alltoall Time 8.538514e-03
Threaded Pairwise Exchange Time 2.247905e-02
Threaded Nonblocking Time 1.799169e-02
Testing Size 131072
PMPI_Alltoall Time 1.581976e-02
Threaded Pairwise Exchange Time 3.289942e-02
Threaded Nonblocking Time 3.415590e-02
Testing Size 262144
PMPI_Alltoall Time 2.940303e-02
Threaded Pairwise Exchange Time 6.438693e-02
Threaded Nonblocking Time 6.856753e-02
Testing Size 524288
PMPI_Alltoall Time 5.780110e-02
Threaded Pairwise Exchange Time 1.262093e-01
Threaded Nonblocking Time 1.316366e-01
app 0: ./gpu_threaded_alltoall 
rank: 0: { host: 1; cpu: {0-39}, {40-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 1: { host: 1; cpu: {40-79}, {0-39,80-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 2: { host: 1; cpu: {80-119}, {0-79,120-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 3: { host: 1; cpu: {120-159}, {0-119} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 4: { host: 2; cpu: {0-39}, {40-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 5: { host: 2; cpu: {40-79}, {0-39,80-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 6: { host: 2; cpu: {80-119}, {0-79,120-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 7: { host: 2; cpu: {120-159}, {0-119} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 8: { host: 3; cpu: {0-39}, {40-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 9: { host: 3; cpu: {40-79}, {0-39,80-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 10: { host: 3; cpu: {80-119}, {0-79,120-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 11: { host: 3; cpu: {120-159}, {0-119} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 12: { host: 4; cpu: {0-39}, {40-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 13: { host: 4; cpu: {40-79}, {0-39,80-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 14: { host: 4; cpu: {80-119}, {0-79,120-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 15: { host: 4; cpu: {120-159}, {0-119} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 16: { host: 5; cpu: {0-39}, {40-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 17: { host: 5; cpu: {40-79}, {0-39,80-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 18: { host: 5; cpu: {80-119}, {0-79,120-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 19: { host: 5; cpu: {120-159}, {0-119} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 20: { host: 6; cpu: {0-39}, {40-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 21: { host: 6; cpu: {40-79}, {0-39,80-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 22: { host: 6; cpu: {80-119}, {0-79,120-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 23: { host: 6; cpu: {120-159}, {0-119} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 24: { host: 7; cpu: {0-39}, {40-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 25: { host: 7; cpu: {40-79}, {0-39,80-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 26: { host: 7; cpu: {80-119}, {0-79,120-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 27: { host: 7; cpu: {120-159}, {0-119} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 28: { host: 8; cpu: {0-39}, {40-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 29: { host: 8; cpu: {40-79}, {0-39,80-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 30: { host: 8; cpu: {80-119}, {0-79,120-159} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0
rank: 31: { host: 8; cpu: {120-159}, {0-119} ; gpu: {0,1,2,3} ; mem: {0-163019,163036-326055} } : app 0

------------------------------------------------------------
Sender: LSF System <lsfadmin@lassen710>
Subject: Job 5220090: <gpu_alltoall8> in cluster <lassen> Done

Job <gpu_alltoall8> was submitted from host <lassen709> by user <bienz1> in cluster <lassen> at Fri Sep 22 15:55:56 2023
Job was executed on host(s) <1*lassen710>, in queue <pbatch>, as user <bienz1> in cluster <lassen> at Fri Sep 22 15:58:05 2023
                            <40*lassen497>
                            <40*lassen324>
                            <40*lassen330>
                            <40*lassen331>
                            <40*lassen332>
                            <40*lassen340>
                            <40*lassen343>
                            <40*lassen677>
</g/g14/bienz1> was used as the home directory.
</g/g14/bienz1/locality_aware_gpu/benchmark_tests/lassen> was used as the working directory.
Started at Fri Sep 22 15:58:05 2023
Terminated at Fri Sep 22 16:01:36 2023
Results reported at Fri Sep 22 16:01:36 2023

Your job looked like:

------------------------------------------------------------
# LSBATCH: User input
#!/bin/bash
#BSUB -J gpu_alltoall8
#BSUB -e gpu_alltoall8.%J.err
#BSUB -o gpu_alltoall8.%J.out
#BSUB -nnodes 8
#BSUB -q pbatch
#BSUB -W 00:15

cd /g/g14/bienz1/locality_aware_gpu/build_gpu_lassen/benchmarks

jsrun -n8 -r1 -a4 -c4 -g4 -M "-gpu" --latency_priority=gpu-cpu --launch_distribution=packed --print_placement=1 ./gpu_alltoall

export MV2_USE_ALIGNED_ALLOC=1
export OMP_NUM_THREADS=10
jsrun -n8 -r1 -a4 -c40 -g4 -bpacked:10 -dpacked -EOMP_NUM_THREADS=10 -M "-gpu" --latency_priority=gpu-cpu --launch_distribution=packed --print_placement=1 ./gpu_threaded_alltoall



------------------------------------------------------------

Successfully completed.

Resource usage summary:

    CPU time :                                   0.23 sec.
    Max Memory :                                 59 MB
    Average Memory :                             55.15 MB
    Total Requested Memory :                     -
    Delta Memory :                               -
    Max Swap :                                   1425 MB
    Max Processes :                              4
    Max Threads :                                27
    Run time :                                   211 sec.
    Turnaround time :                            340 sec.

The output (if any) is above this job summary.



PS:

Read file <gpu_alltoall8.5220090.err> for stderr output of this job.

